<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Clauses/MERGE">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">MERGE | PostGraph</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://postgraphdb.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://postgraphdb.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://postgraphdb.github.io/docs/Clauses/MERGE"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MERGE | PostGraph"><meta data-rh="true" name="description" content="MERGE Clause for PostGraph"><meta data-rh="true" property="og:description" content="MERGE Clause for PostGraph"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://postgraphdb.github.io/docs/Clauses/MERGE"><link data-rh="true" rel="alternate" href="https://postgraphdb.github.io/docs/Clauses/MERGE" hreflang="en"><link data-rh="true" rel="alternate" href="https://postgraphdb.github.io/docs/Clauses/MERGE" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="PostGraph RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="PostGraph Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e71638d3.css">
<link rel="preload" href="/assets/js/runtime~main.2f81d8d6.js" as="script">
<link rel="preload" href="/assets/js/main.a0af820c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">PostGraphDB</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/PostGraphDB" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://www.patreon.com/PostGraph" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/installation">Installation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Datatypes/vertex">Datatypes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/clauses">Clauses</a><button aria-label="Toggle the collapsible sidebar category &#x27;Clauses&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/MATCH">MATCH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/RETURN">RETURN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/CREATE">CREATE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/SET">SET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/REMOVE">REMOVE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/DELETE">DELETE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Clauses/MERGE">MERGE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/UNION">UNION</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/OPTIONAL-MATCH">OPTIONAL MATCH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/WHERE">WHERE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/LIMIT">LIMIT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/ORDER_BY">ORDER BY</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/SKIP">SKIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Clauses/UNWIND">UNWIND</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/functions">Functions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Functions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/clauses"><span itemprop="name">Clauses</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MERGE</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Merge Clause</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introductions">Introductions<a href="#introductions" class="hash-link" aria-label="Direct link to Introductions" title="Direct link to Introductions">​</a></h2><p>The MERGE clause either matches existing node patterns in the graph and binds them or, if not present, creates new data and binds that. In this way, it acts as a combination of MATCH and CREATE that allows for specific actions depending on whether the specified data was matched or created.</p><p>For example, MERGE can be used to specify that a graph must contain a node with a Person label and a specific name property. If there isn’t a node with the specific name property, a new node will be created with that name property.</p><p>When using MERGE on full patterns, the behavior is that either the whole pattern matches, or the whole pattern is created. MERGE will not partially use existing patterns. If partial matches are needed, this can be accomplished by splitting a pattern into multiple MERGE clauses.</p><p>Under concurrent updates, MERGE only guarantees the existence of the MERGE pattern, but not uniqueness. To guarantee uniqueness of nodes with certain properties, a property uniqueness constraint should be used. See Using property uniqueness constraints with MERGE.</p><p>Similar to MATCH, MERGE can match multiple occurrences of a pattern. If there are multiple matches, they will all be passed on to later stages of the query.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-setup">Data Setup<a href="#data-setup" class="hash-link" aria-label="Direct link to Data Setup" title="Direct link to Data Setup">​</a></h2><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> create_graph</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">charlie:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Charlie Sheen&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn: </span><span class="token string" style="color:#e3116c">&#x27;New York&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeurName: </span><span class="token string" style="color:#e3116c">&#x27;John Brown&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">martin:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Martin Sheen&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn: </span><span class="token string" style="color:#e3116c">&#x27;Ohio&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeurName: </span><span class="token string" style="color:#e3116c">&#x27;Bob Brown&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">michael:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Michael Douglas&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn: </span><span class="token string" style="color:#e3116c">&#x27;New Jersey&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeurName: </span><span class="token string" style="color:#e3116c">&#x27;John Brown&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oliver:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Oliver Stone&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn: </span><span class="token string" style="color:#e3116c">&#x27;New York&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeurName: </span><span class="token string" style="color:#e3116c">&#x27;Bill White&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rob:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Rob Reiner&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn: </span><span class="token string" style="color:#e3116c">&#x27;New York&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeurName: </span><span class="token string" style="color:#e3116c">&#x27;Ted Green&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wallStreet:Movie {title: </span><span class="token string" style="color:#e3116c">&#x27;Wall Street&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">theAmericanPresident:Movie {title: </span><span class="token string" style="color:#e3116c">&#x27;The American President&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">charlie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:ACTED_IN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wallStreet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">martin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:ACTED_IN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wallStreet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">michael</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:ACTED_IN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wallStreet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">martin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:ACTED_IN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">theAmericanPresident</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">michael</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:ACTED_IN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">theAmericanPresident</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oliver</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:DIRECTED</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wallStreet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rob</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:DIRECTED</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">theAmericanPresident</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a gtype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="merge-vertices">Merge Vertices<a href="#merge-vertices" class="hash-link" aria-label="Direct link to Merge Vertices" title="Direct link to Merge Vertices">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-vertex-with-a-label">Merge Vertex with a Label<a href="#merge-vertex-with-a-label" class="hash-link" aria-label="Direct link to Merge Vertex with a Label" title="Direct link to Merge Vertex with a Label">​</a></h3><p>Merge a node with a specific label:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query">Query<a href="#query" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">robert:Critic</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> robert</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> labels</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">robert</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v vertex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> labels gtype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A new node is created because there are no nodes labeled Critic in the database:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result">Result<a href="#result" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">robert</th><th>labels</th></tr></thead><tbody><tr><td align="left">{<!-- -->id:0, label: &quot;Critic&quot;, properties: <!-- -->{<!-- --> <!-- -->}<!-- -->}</td><td>[&quot;Critic&quot;]</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-vertex-with-properties">Merge Vertex with Properties<a href="#merge-vertex-with-properties" class="hash-link" aria-label="Direct link to Merge Vertex with Properties" title="Direct link to Merge Vertex with Properties">​</a></h3><p>Merging a node with properties that differ from the properties on existing nodes in the graph will create a new node:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-1">Query<a href="#query-1" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">charlie {name: </span><span class="token string" style="color:#e3116c">&#x27;Charlie Sheen&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age: </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> charlie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v vertex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A new node with the name Charlie Sheen is created since not all properties matched those set to the pre-existing Charlie Sheen node:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-charlie">Result charlie<a href="#result-charlie" class="hash-link" aria-label="Direct link to Result charlie" title="Direct link to Result charlie">​</a></h4><table><thead><tr><th align="left">v</th></tr></thead><tbody><tr><td align="left">{<!-- -->id:1, label: &quot;Person&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Charlie Sheen&quot;, &quot;age&quot;:10<!-- -->}<!-- -->}</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-vertex-with-a-label-and-properties">Merge Vertex with a Label and Properties<a href="#merge-vertex-with-a-label-and-properties" class="hash-link" aria-label="Direct link to Merge Vertex with a Label and Properties" title="Direct link to Merge Vertex with a Label and Properties">​</a></h3><p>Merging a single node with both label and property matching an existing node will not create a new node:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-2">Query<a href="#query-2" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">michael:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Michael Douglas&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> michael</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> michael</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bornIn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn gtype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Michael Douglas is matched and the name and bornIn properties are returned:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-1">Result<a href="#result-1" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">name</th><th>bornIn</th></tr></thead><tbody><tr><td align="left">&quot;Michael Douglas&quot;</td><td>&quot;New Jersey&quot;</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-single-node-derived-from-an-existing-node-property">Merge single node derived from an existing node property<a href="#merge-single-node-derived-from-an-existing-node-property" class="hash-link" aria-label="Direct link to Merge single node derived from an existing node property" title="Direct link to Merge single node derived from an existing node property">​</a></h3><p>It is possible to merge nodes using existing node properties:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-3">Query<a href="#query-3" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MATCH</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person:Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location:Location {name: person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bornIn}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bornIn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> location vertex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above query, three nodes labeled Location are created, each of which contains a name property with the value of New York, Ohio, and New Jersey respectively. Note that even though the MATCH clause results in three bound nodes having the value New York for the bornIn property, only a single New York node (i.e. a Location node with a name of New York) is created. As the New York node is not matched for the first bound node, it is created. However, the newly-created New York node is matched and bound for the second and third bound nodes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-2">Result<a href="#result-2" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">name</th><th>bornIn</th><th>location</th></tr></thead><tbody><tr><td align="left">&quot;Charlie Sheen&quot;</td><td>&quot;New York&quot;</td><td>{<!-- -->id:1, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New York&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Martin Sheen&quot;</td><td>&quot;Ohio&quot;</td><td>{<!-- -->id:2, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Ohio&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Michael Douglas&quot;</td><td>&quot;New Jersey&quot;</td><td>{<!-- -->id:3, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New Jersey&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Oliver Stone&quot;</td><td>&quot;New York&quot;</td><td>{<!-- -->id:4, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New York&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Rob Reiner&quot;</td><td>&quot;New York&quot;</td><td>{<!-- -->id:5, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New York&quot;<!-- -->}<!-- -->}</td></tr></tbody></table><p><strong>Note</strong> It is a known bug that the New York vertex is created multiple times and will be fixed in a future release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="merge-edges">Merge Edges<a href="#merge-edges" class="hash-link" aria-label="Direct link to Merge Edges" title="Direct link to Merge Edges">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-an-edge">Merge on an Edge<a href="#merge-on-an-edge" class="hash-link" aria-label="Direct link to Merge on an Edge" title="Direct link to Merge on an Edge">​</a></h3><p>MERGE can be used to match or create an edge:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-4">Query<a href="#query-4" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MATCH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">charlie:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Charlie Sheen&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wallStreet:Movie {title: </span><span class="token string" style="color:#e3116c">&#x27;Wall Street&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">charlie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">r:ACTED_IN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wallStreet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> charlie</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wallStreet</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title gtype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Charlie Sheen had already been marked as acting in Wall Street, so the existing relationship is found and returned. Note that in order to match or create a relationship when using MERGE, at least one bound node must be specified, which is done via the MATCH clause in the above example.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-3">Result<a href="#result-3" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">name</th><th>type</th><th>title</th></tr></thead><tbody><tr><td align="left">&quot;Charlie Sheen&quot;</td><td>&quot;ACTED_IN&quot;</td><td>&quot;Wall Street&quot;</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-multiple-edges">Merge on Multiple Edges<a href="#merge-on-multiple-edges" class="hash-link" aria-label="Direct link to Merge on Multiple Edges" title="Direct link to Merge on Multiple Edges">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-5">Query<a href="#query-5" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">MATCH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oliver:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Oliver Stone&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reiner:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Rob Reiner&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oliver</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:DIRECTED</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">movie:Movie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:DIRECTED</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reiner</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> movie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">movie vertex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the example graph, Oliver Stone and Rob Reiner have never worked together. When trying to MERGE a Movie node between them, PostGraph will not use any of the existing Movie nodes already connected to either person. Instead, a new Movie node is created.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-4">Result<a href="#result-4" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">movie</th></tr></thead><tbody><tr><td align="left">{<!-- -->id:1, label: &quot;Movie&quot;, properties: <!-- -->{<!-- --> <!-- -->}<!-- -->}</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-an-undirected-edge">Merge on an Undirected Edge<a href="#merge-on-an-undirected-edge" class="hash-link" aria-label="Direct link to Merge on an Undirected Edge" title="Direct link to Merge on an Undirected Edge">​</a></h3><p>MERGE can also be used without specifying the direction of a relationship. Cypher will first try to match the relationship in both directions. If the relationship does not exist in either direction, it will create one left to right.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-6">Query<a href="#query-6" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MATCH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">charlie:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Charlie Sheen&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oliver:Person {name: </span><span class="token string" style="color:#e3116c">&#x27;Oliver Stone&#x27;</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">charlie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">r:KNOWS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oliver</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r edge</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As Charlie Sheen and Oliver Stone do not know each other in the example graph, this MERGE query will create a KNOWS relationship between them. The direction of the created relationship is left to right.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-5">Result<a href="#result-5" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">r</th></tr></thead><tbody><tr><td align="left">{<!-- -->id:1, label: &quot;KNOWS&quot;, properties: <!-- -->{<!-- --> <!-- -->}<!-- -->}</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-an-edge-between-two-vertices">Merge on an Edge Between Two Vertices<a href="#merge-on-an-edge-between-two-vertices" class="hash-link" aria-label="Direct link to Merge on an Edge Between Two Vertices" title="Direct link to Merge on an Edge Between Two Vertices">​</a></h3><p>MERGE can be used in conjunction with preceding MATCH and MERGE clauses to create a relationship between two bound nodes m and n, where m is returned by MATCH and n is created or matched by the earlier MERGE.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-7">Query<a href="#query-7" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MATCH</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person:Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location:Location {name: person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bornIn}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">r:BORN_IN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bornIn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bornIn gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> location vertex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This builds on the example from Merge single node derived from an existing node property. The second MERGE creates a BORN_IN relationship between each person and a location corresponding to the value of the person’s bornIn property. Charlie Sheen, Rob Reiner, and Oliver Stone all have a BORN_IN relationship to the same Location node (New York).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-6">Result<a href="#result-6" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">name</th><th>bornIn</th><th>location</th></tr></thead><tbody><tr><td align="left">&quot;Charlie Sheen&quot;</td><td>&quot;New York&quot;</td><td>{<!-- -->id:1, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New York&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Martin Sheen&quot;</td><td>&quot;Ohio&quot;</td><td>{<!-- -->id:2, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Ohio&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Michael Douglas&quot;</td><td>&quot;New Jersey&quot;</td><td>{<!-- -->id:3, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New Jersey&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Oliver Stone&quot;</td><td>&quot;New York&quot;</td><td>{<!-- -->id:4, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New York&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Rob Reiner&quot;</td><td>&quot;New York&quot;</td><td>{<!-- -->id:5, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;New York&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Keanu Reeves&quot;</td><td>&quot;Beirut&quot;</td><td>{<!-- -->id:5, label: &quot;Location&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Beirut&quot;<!-- -->}<!-- -->}</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-an-edge-between-between-an-existing-vertex-derived-from-a-vertex-property">Merge on an Edge Between Between an Existing Vertex Derived From a Vertex Property<a href="#merge-on-an-edge-between-between-an-existing-vertex-derived-from-a-vertex-property" class="hash-link" aria-label="Direct link to Merge on an Edge Between Between an Existing Vertex Derived From a Vertex Property" title="Direct link to Merge on an Edge Between Between an Existing Vertex Derived From a Vertex Property">​</a></h3><p>MERGE can be used to simultaneously create both a new node n and a relationship between a bound node m and n:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-8">Query<a href="#query-8" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h4><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> cypher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;merge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MATCH</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person:Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">MERGE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">r:HAS_CHAUFFEUR</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chauffeur:Chauffeur {name: person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chauffeurName}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chauffeurName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeurName gtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chauffeur vertex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As MERGE found no matches — in the example graph, there are no nodes labeled with Chauffeur and no HAS_CHAUFFEUR relationships — MERGE creates six nodes labeled with Chauffeur, each of which contains a name property whose value corresponds to each matched Person node’s chauffeurName property value. MERGE also creates a HAS_CHAUFFEUR relationship between each Person node and the newly-created corresponding Chauffeur node. As &#x27;Charlie Sheen&#x27; and &#x27;Michael Douglas&#x27; both have a chauffeur with the same name — &#x27;John Brown&#x27; — a new node is created in each case, resulting in two Chauffeur nodes having a name of &#x27;John Brown&#x27;, correctly denoting the fact that even though the name property may be identical, these are two separate people. This is in contrast to the example shown above in Merge on a relationship between two existing nodes, where the first MERGE was used to bind the Location nodes and to prevent them from being recreated (and thus duplicated) on the second MERGE.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="result-7">Result<a href="#result-7" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h4><table><thead><tr><th align="left">name</th><th>chauffeurName</th><th align="right">chauffeur</th></tr></thead><tbody><tr><td align="left">&quot;Charlie Sheen&quot;</td><td>&quot;John Brown&quot;</td><td align="right">{<!-- -->id:1, label: &quot;Person&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;John Brown&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Martin Sheen&quot;</td><td>&quot;Bob Brown&quot;</td><td align="right">{<!-- -->id:1, label: &quot;Person&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Bob Brown&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Michael Douglas&quot;</td><td>&quot;John Brown&quot;</td><td align="right">{<!-- -->id:1, label: &quot;Person&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;John Brown&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Oliver Stone&quot;</td><td>&quot;Bill White&quot;</td><td align="right">{<!-- -->id:1, label: &quot;Person&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Bill White&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Rob Reiner&quot;</td><td>&quot;Ted Green&quot;</td><td align="right">{<!-- -->id:1, label: &quot;Person&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Ted Green&quot;<!-- -->}<!-- -->}</td></tr><tr><td align="left">&quot;Keanu Reeves&quot;</td><td>&quot;Eric Brown&quot;</td><td align="right">{<!-- -->id:1, label: &quot;Person&quot;, properties: <!-- -->{<!-- --> &quot;name&quot;:&quot;Eric Brown&quot;<!-- -->}<!-- -->}</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/postgraphdb/postgraphdb.github.io/tree/code/docs/03-Clauses/08-MERGE.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Clauses/DELETE"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DELETE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Clauses/UNION"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">UNION</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introductions" class="table-of-contents__link toc-highlight">Introductions</a></li><li><a href="#data-setup" class="table-of-contents__link toc-highlight">Data Setup</a></li><li><a href="#merge-vertices" class="table-of-contents__link toc-highlight">Merge Vertices</a><ul><li><a href="#merge-vertex-with-a-label" class="table-of-contents__link toc-highlight">Merge Vertex with a Label</a></li><li><a href="#merge-vertex-with-properties" class="table-of-contents__link toc-highlight">Merge Vertex with Properties</a></li><li><a href="#merge-vertex-with-a-label-and-properties" class="table-of-contents__link toc-highlight">Merge Vertex with a Label and Properties</a></li><li><a href="#merge-single-node-derived-from-an-existing-node-property" class="table-of-contents__link toc-highlight">Merge single node derived from an existing node property</a></li></ul></li><li><a href="#merge-edges" class="table-of-contents__link toc-highlight">Merge Edges</a><ul><li><a href="#merge-on-an-edge" class="table-of-contents__link toc-highlight">Merge on an Edge</a></li><li><a href="#merge-on-multiple-edges" class="table-of-contents__link toc-highlight">Merge on Multiple Edges</a></li><li><a href="#merge-on-an-undirected-edge" class="table-of-contents__link toc-highlight">Merge on an Undirected Edge</a></li><li><a href="#merge-on-an-edge-between-two-vertices" class="table-of-contents__link toc-highlight">Merge on an Edge Between Two Vertices</a></li><li><a href="#merge-on-an-edge-between-between-an-existing-vertex-derived-from-a-vertex-property" class="table-of-contents__link toc-highlight">Merge on an Edge Between Between an Existing Vertex Derived From a Vertex Property</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/dhzFGvxGhn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/_postgraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://www.patreon.com/PostGraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">Patreon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/PostGraphDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 PostGraphDB. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2f81d8d6.js"></script>
<script src="/assets/js/main.a0af820c.js"></script>
</body>
</html>